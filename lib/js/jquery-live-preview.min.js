(function(a){a.fn.extend({livePreview:function(d){var f={targetWidth:1000,targetHeight:800,viewWidth:300,viewHeight:200,position:"right",positionOffset:50};var d=a.extend(f,d);var e=(d.viewWidth/d.targetWidth);var b=(d.viewHeight/d.targetHeight);var c=1;if(typeof d.scale!="undefined"){c=d.scale}else{if(e>b){c=e}else{c=b}}return this.each(function(){var j=d;var h=c;var i=a(this);var g=a(this).attr("href");i.hover(function(){var k=j.position;if(i.attr("data-position")){k=i.attr("data-position")}var n=j.positionOffset;if(i.attr("data-positionOffset")){n=i.attr("data-positionOffset")}if(i.attr("data-scale")){h=i.attr("data-scale")}var p=a(this).offset();var l=a(this).width();var o=p.left+l+n;if(k=="left"){o=p.left-j.viewWidth-n}var m=p.top-(j.viewHeight/2);a("body").append('<div id="livepreview_dialog" class="'+k+'" style="display:none; padding:0px; left: '+o+"px; top:"+m+"px; width: "+j.viewWidth+"px; height: "+j.viewHeight+'px"><div class="livepreview-container" style="overflow:hidden; width: '+j.viewWidth+"px; height: "+j.viewHeight+'px"><iframe id="livepreview_iframe" src="'+g+'" style="height:'+j.targetHeight+"px; width:"+j.targetWidth+"px;-moz-transform: scale("+h+");-moz-transform-origin: 0 0;-o-transform: scale("+h+");-o-transform-origin: 0 0;-webkit-transform: scale("+h+');-webkit-transform-origin: 0 0;"></iframe></div></div>');a("#livepreview_dialog").fadeIn(100)},function(){a("#livepreview_dialog").remove()})})}})})(jQuery);
